# 全能二维码扫描器

这是一个使用 Python 和 `customtkinter` 构建的桌面应用程序，提供了多种扫描二维码的方式。

## 功能

*   **摄像头实时扫描**: 使用电脑摄像头实时捕捉并解码二维码。
*   **上传图片扫描**: 从本地文件系统选择并上传图片文件进行解码。
*   **选区截屏扫描**: 截取屏幕上的任意区域进行二维码扫描。
*   **实时区域扫描**: 启动一个可拖动的透明窗口，实时扫描窗口下方的屏幕内容。
*   **复制数据**: 扫描成功后，一键复制解码出的二维码数据到剪贴板。

## 改进与优化

*   **UI 布局优化**: 按钮布局调整为更紧凑的 2x3 网格，提升界面美观度和可用性。
*   **macOS 摄像头权限提示**: 针对 macOS 用户，当摄像头无法访问时提供明确的权限设置指引。
*   **焦点管理修复**: 解决了“实时区域扫描”功能在 macOS 上可能导致的窗口焦点丢失问题，确保主窗口按钮始终响应。
*   **程序平滑退出**: 优化了程序关闭时的资源清理，确保后台线程安全终止。

## 技术栈

*   **GUI**: `customtkinter` - 一个基于 Tkinter 的现代 UI 工具包。
*   **图像处理**: `Pillow (PIL)`
*   **摄像头与视频**: `OpenCV (cv2)`
*   **二维码解码**: `pyzbar`
*   **屏幕截图**: `mss`

## 如何运行

**强烈建议使用虚拟环境运行此应用，以避免系统依赖冲突。**

1.  **创建并激活虚拟环境** (如果尚未创建):
    ```bash
    python3 -m venv venv
    # macOS/Linux
    source venv/bin/activate
    # Windows
    .\venv\Scripts\activate
    ```

2.  **安装所有必要的库** (在激活虚拟环境后):
    ```bash
    pip install -r requirements.txt
    ```

3.  **运行主程序** (在激活虚拟环境后):
    ```bash
    python app.py
    ```

**注意：**
*   首次运行或在 macOS 上遇到摄像头问题时，请检查系统设置中的隐私与安全性，确保本应用已被授权访问摄像头。
*   如果遇到 `pip` 命令无法使用的问题，请尝试使用 `pip3`。如果仍然遇到“externally-managed-environment”错误，请务必使用虚拟环境。